(this["webpackJsonpstar-wars-card-game"]=this["webpackJsonpstar-wars-card-game"]||[]).push([[0],{101:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(51),i=n.n(c),s=n(34),o=n(137),l=n(76),u=n(126),d=n(149),j=n(2);function h(e){var t=e.children,n=Object(l.a)();return Object(j.jsx)(u.a,{injectFirst:!0,children:Object(j.jsxs)(d.a,{theme:n,children:[Object(j.jsx)(o.a,{}),t]})})}var b=n(147),O=n(148),m=n(142),f=n(133),g=n(16),p=n(138);function x(e){var t=e.sx;return Object(j.jsx)(p.a,{component:"img",src:"/static/logo.svg",sx:Object(g.a)({width:40,height:40},t)})}var v,C=n(136),w=n(139),R=n(141),A=n(143),y=n(144),S=n(134);!function(e){e.CHARACTER="Character",e.RANDOM="Random",e.STARSHIP="Starship"}(v||(v={}));var N=[{title:v.CHARACTER,icon:"people",description:"A person with greater mass wins"},{title:v.RANDOM,icon:"question",description:"Random choice between a character and a starship"},{title:v.STARSHIP,icon:"rocket",description:"A starship with more crew wins"}],k={name:"Peasant",mass:1,gender:"male",birth_year:"unknown",height:"unknown"},T={name:"Solar Satellite",crew:0,model:"satellite",manufacturer:"unknown",length:"unknown"};function E(e){var t=e.title,n=e.icon,r=e.description,a=e.selectedCard,c=e.onClick,i=P();return Object(j.jsx)(C.a,{item:!0,xs:12,sm:t===v.STARSHIP?12:6,md:4,children:Object(j.jsxs)(w.a,{children:[Object(j.jsx)(R.a,{className:i.header,title:t}),Object(j.jsxs)(A.a,{className:i.content,children:[Object(j.jsx)(p.a,{className:i.icon,component:"img",src:"/static/".concat(n,".svg")}),Object(j.jsx)(m.a,{component:"p",variant:"subtitle1",align:"center",children:r})]}),Object(j.jsx)(y.a,{children:Object(j.jsx)(S.a,{fullWidth:!0,variant:a===t?"contained":"outlined",onClick:function(){return c(t)},children:"Select"})})]})})}var P=Object(f.a)((function(e){return{header:{textAlign:"center",backgroundColor:e.palette.grey[200]},content:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",height:160},icon:{width:"100%",height:60,marginBottom:15}}})),H=n(15),I=n(145),B=n(146),W=n(37),M=n.n(W),D=n(55),F="http://swapi.dev/api";function L(e){return Math.floor(Math.random()*(e-1+1))+1}function G(){return(G=Object(D.a)(M.a.mark((function e(t){var n,r;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=L(t),e.next=3,fetch("".concat(F,"/people/?page=").concat(n));case 3:return r=e.sent,e.abrupt("return",r.json());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Q=function(e){var t=Object(s.useQuery)(["people",e],(function(){return function(e){return G.apply(this,arguments)}(e)}),{enabled:Boolean(e)});return{data:t.data,isLoading:t.isLoading,isError:t.isError,isFetching:t.isFetching,refetch:t.refetch}};function q(){return(q=Object(D.a)(M.a.mark((function e(t){var n,r;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=L(t),e.next=3,fetch("".concat(F,"/starships/?page=").concat(n));case 3:return r=e.sent,e.abrupt("return",r.json());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var J=function(e){var t=Object(s.useQuery)(["starships",e],(function(){return function(e){return q.apply(this,arguments)}(e)}),{enabled:Boolean(e)});return{data:t.data,isLoading:t.isLoading,isError:t.isError,isFetching:t.isFetching,refetch:t.refetch}};function U(e){return Math.ceil(e/10)}var Y=function(e){return parseInt(e,10)};var _=Object(r.createContext)(null);function z(e){var t=e.children,n=Object(r.useState)(v.RANDOM),a=Object(H.a)(n,2),c=a[0],i=a[1],s=Object(r.useState)(v.RANDOM),o=Object(H.a)(s,2),l=o[0],u=o[1],d=Object(r.useState)(1),h=Object(H.a)(d,2),b=h[0],O=h[1],m=Q(b),f=m.data,p=m.isLoading,x=m.isError,C=m.refetch,w=Object(r.useState)(1),R=Object(H.a)(w,2),A=R[0],y=R[1],S=J(A),N=S.data,k=S.isLoading,T=S.isError,E=S.refetch,P=Object(r.useState)(null),I=Object(H.a)(P,2),B=I[0],W=I[1],M=Object(r.useState)({first:0,second:0}),D=Object(H.a)(M,2),F=D[0],L=D[1];Object(r.useEffect)((function(){l===v.CHARACTER&&W({data:f,isLoading:p,isError:x,refetch:C}),l===v.STARSHIP&&W({data:N,isLoading:k,isError:T,refetch:E})}),[c,f,N]),Object(r.useEffect)((function(){l===v.CHARACTER&&f&&O(U(f.count)),l===v.STARSHIP&&N&&y(U(N.count))}),[c]);return Object(j.jsx)(_.Provider,{value:{resource:c,selectedResource:l,onResourceSelect:function(e){i(e),u(function(e){var t;switch(e){case v.CHARACTER:t=v.CHARACTER;break;case v.STARSHIP:t=v.STARSHIP;break;case v.RANDOM:t=[v.CHARACTER,v.STARSHIP][Math.floor(2*Math.random())];break;default:t=v.CHARACTER}return t}(e))},gameData:B,getBattleResult:function(e,t){if(l===v.CHARACTER){var n=Y(e.mass),r=Y(t.mass);return isNaN(n)||isNaN(r)?"Unknown result of the battle":n>r?(L(Object(g.a)(Object(g.a)({},F),{},{first:F.first+1})),"The winner is ".concat(e.name)):n<r?(L(Object(g.a)(Object(g.a)({},F),{},{second:F.second+1})),"The winner is ".concat(t.name)):"We have draw!"}if(l===v.STARSHIP){var a=Y(e.crew),c=Y(t.crew);return isNaN(a)||isNaN(c)?"Unknown result of the battle":a>c?(L(Object(g.a)(Object(g.a)({},F),{},{first:F.first+1})),"The winner is ".concat(e.name)):a<c?(L(Object(g.a)(Object(g.a)({},F),{},{second:F.second+1})),"The winner is ".concat(t.name)):"We have draw!"}return"Something went wrong"},counter:F,setCounter:L},children:t})}var K=function(){var e=Object(r.useContext)(_);if(!e)throw new Error("Game context must be use inside GameProvider");return e};function V(e){var t,n,r,a,c,i,s,o,l,u,d=X();return K().selectedResource===v.CHARACTER?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(R.a,{className:d.header,title:null!==(t=e.name)&&void 0!==t?t:"Peasant"}),Object(j.jsxs)(A.a,{className:d.content,children:[Object(j.jsxs)(m.a,{component:"div",variant:"h4",gutterBottom:!0,align:"center",children:[Object(j.jsx)("strong",{children:"Mass: "}),null!==(n=e.mass)&&void 0!==n?n:1]}),Object(j.jsxs)(m.a,{component:"p",variant:"subtitle1",align:"center",children:[Object(j.jsx)("strong",{children:"Gender: "}),null!==(r=e.gender)&&void 0!==r?r:"male"]}),Object(j.jsxs)(m.a,{component:"p",variant:"subtitle1",align:"center",children:[Object(j.jsx)("strong",{children:"Birth Year: "}),null!==(a=e.birth_year)&&void 0!==a?a:"unknown"]}),Object(j.jsxs)(m.a,{component:"p",variant:"subtitle1",align:"center",children:[Object(j.jsx)("strong",{children:"Height: "}),null!==(c=e.height)&&void 0!==c?c:"unknown"]})]})]}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(R.a,{className:d.header,title:null!==(i=e.name)&&void 0!==i?i:"Solar Satellite"}),Object(j.jsxs)(A.a,{className:d.content,children:[Object(j.jsx)(m.a,{component:"div",variant:"h4",gutterBottom:!0,align:"center",children:Object(j.jsxs)("strong",{children:["Crew: ",null!==(s=e.crew)&&void 0!==s?s:0]})}),Object(j.jsxs)(m.a,{component:"p",variant:"subtitle1",align:"center",children:["Model: ",null!==(o=e.model)&&void 0!==o?o:"satellite"]}),Object(j.jsxs)(m.a,{component:"p",variant:"subtitle1",align:"center",children:["Manufacturer: ",null!==(l=e.manufacturer)&&void 0!==l?l:"unknown"]}),Object(j.jsxs)(m.a,{component:"p",variant:"subtitle1",align:"center",children:["length: ",null!==(u=e.length)&&void 0!==u?u:"unknown"]})]})]})}var X=Object(f.a)((function(e){return{header:{textAlign:"center",backgroundColor:e.palette.grey[200]},content:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",width:400,height:300}}}));function Z(e){var t=$();return Object(j.jsxs)(p.a,{className:t.root,children:[Object(j.jsx)(m.a,{component:"div",variant:"h5",gutterBottom:!0,align:"center",children:Object(j.jsx)("strong",{children:e.heading})}),Object(j.jsx)(w.a,{className:t.card,sx:{border:"1px solid ".concat(e.isWinner?"green":"red")},children:Object(j.jsx)(V,Object(g.a)({},e))}),Object(j.jsxs)(m.a,{component:"div",variant:"h6",gutterBottom:!0,align:"center",children:[Object(j.jsx)("strong",{children:"Score: "}),e.counter]})]})}var $=Object(f.a)((function(e){return{root:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},card:{margin:10},header:{textAlign:"center",backgroundColor:e.palette.grey[200]},content:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",width:300,height:300}}}));function ee(e){var t=e.onPlayClick,n=te(),a=K(),c=a.selectedResource,i=a.gameData,s=a.getBattleResult,o=a.counter,l=a.setCounter,u=Object(r.useState)(null),d=Object(H.a)(u,2),h=d[0],b=d[1],O=Object(r.useState)(null),m=Object(H.a)(O,2),f=m[0],p=m[1],x=Object(r.useState)(""),C=Object(H.a)(x,2),w=C[0],R=C[1],A=c===v.CHARACTER?k:T,y=function(e){return w.includes(e)},N=i,E=N.data,P=N.isLoading,W=N.isError,M=N.refetch;Object(r.useEffect)((function(){if(E){var e,t,n,r,a,c;if(!y(null===h||void 0===h?void 0:h.name))b(null!==(e=E.results[L(null!==(t=null===E||void 0===E||null===(n=E.results)||void 0===n?void 0:n.length)&&void 0!==t?t:10)])&&void 0!==e?e:A);if(!y(null===f||void 0===f?void 0:f.name))p(null!==(r=E.results[L(null!==(a=null===E||void 0===E||null===(c=E.results)||void 0===c?void 0:c.length)&&void 0!==a?a:10)])&&void 0!==r?r:A)}}),[E]),Object(r.useEffect)((function(){if(h&&f){var e=s(h,f);R(e)}}),[h,f]);var D=function(){return function(){return M()}};return P?Object(j.jsx)("div",{className:n.wrapper,children:Object(j.jsx)(I.a,{})}):W?Object(j.jsxs)("div",{className:n.wrapper,children:[Object(j.jsx)("span",{children:"Cannot get cards. Please try again"}),Object(j.jsx)(S.a,{className:n.button,variant:"contained",onClick:function(){return D()},children:"Play Again"})]}):Object(j.jsxs)(B.a,{maxWidth:"lg",component:"main",className:n.root,children:[Object(j.jsx)("h2",{className:n.result,children:w}),Object(j.jsxs)("div",{className:n.cardsWrapper,children:[Object(j.jsx)(Z,Object(g.a)(Object(g.a)({},h),{},{heading:"You",counter:o.first,isWinner:y(null===h||void 0===h?void 0:h.name)})),"vs.",Object(j.jsx)(Z,Object(g.a)(Object(g.a)({},f),{},{heading:"Computer",counter:o.second,isWinner:y(null===f||void 0===f?void 0:f.name)}))]}),Object(j.jsxs)("div",{className:n.actionsButton,children:[Object(j.jsx)(S.a,{className:n.button,variant:"contained",onClick:D(),children:"Play Again"}),Object(j.jsx)(S.a,{className:n.button,variant:"contained",onClick:function(){t(!1),l({first:0,second:0})},children:"Start New Game"})]})]})}var te=Object(f.a)((function(){return{root:{padding:20},result:{textAlign:"center"},cardsWrapper:{display:"flex",justifyContent:"center",alignItems:"center"},actionsButton:{display:"flex",justifyContent:"center"},button:{margin:15},wrapper:{width:"100%",height:"50vh",display:"flex",justifyContent:"center",alignItems:"center"}}}));function ne(){var e=re();return Object(j.jsx)(b.a,{className:e.header,position:"static",color:"default",elevation:0,children:Object(j.jsx)(O.a,{className:e.toolbar,children:Object(j.jsx)(m.a,{variant:"h6",color:"inherit",noWrap:!0,children:Object(j.jsx)(x,{})})})})}var re=Object(f.a)((function(e){return{header:{borderBottom:"1px solid ".concat(e.palette.divider)},toolbar:{flexWrap:"wrap"}}}));function ae(e){var t=e.children;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(ne,{}),t]})}function ce(e){var t=e.onPlayClick,n=ie(),r=K(),a=r.resource,c=r.onResourceSelect;return Object(j.jsxs)(B.a,{className:n.root,maxWidth:"lg",component:"main",children:[Object(j.jsx)(m.a,{component:"h1",variant:"h2",align:"center",color:"text.primary",gutterBottom:!0,children:"Star Wars Card Game"}),Object(j.jsx)(m.a,{variant:"h5",align:"center",color:"text.secondary",component:"p",children:"Choose one of the resources and participate in the galactic battle!"}),Object(j.jsx)(C.a,{className:n.cardsWrapper,container:!0,spacing:5,alignItems:"flex-start",children:N.map((function(e){return Object(j.jsx)(E,Object(g.a)(Object(g.a)({},e),{},{selectedCard:a,onClick:function(e){return c(e)}}),e.title)}))}),Object(j.jsx)(S.a,{className:n.button,variant:"contained",onClick:function(){return t(!0)},children:"Play"})]})}var ie=Object(f.a)((function(){return{root:{display:"flex",flexDirection:"column",alignItems:"center",padding:40},cardsWrapper:{padding:30},button:{height:50,width:100}}}));function se(e){var t=e.onPlayClick,n=K().selectedResource;return Object(j.jsxs)(B.a,{maxWidth:"lg",component:"main",sx:{p:5},children:[Object(j.jsx)(m.a,{component:"h1",variant:"h2",align:"center",color:"text.primary",gutterBottom:!0,children:"".concat(n," Battle")}),Object(j.jsx)(ee,{onPlayClick:t})]})}function oe(){var e=Object(r.useState)(!1),t=Object(H.a)(e,2),n=t[0],a=t[1];return n?Object(j.jsx)(se,{onPlayClick:a}):Object(j.jsx)(ce,{onPlayClick:a})}var le=new s.QueryClient({defaultOptions:{queries:{refetchOnWindowFocus:!1,refetchOnReconnect:!1,retry:!1,staleTime:3e5}}});function ue(){return Object(j.jsx)(s.QueryClientProvider,{client:le,children:Object(j.jsx)(z,{children:Object(j.jsx)(h,{children:Object(j.jsx)(ae,{children:Object(j.jsx)(oe,{})})})})})}var de=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,150)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))};i.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(ue,{})}),document.getElementById("root")),de()}},[[101,1,2]]]);
//# sourceMappingURL=main.14c72d7f.chunk.js.map